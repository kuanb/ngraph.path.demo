{"version":3,"sources":["webpack:///./src/appModel.js","webpack:///./src/bus.js","webpack:///./src/BBox.js","webpack:///./src/App.vue?9899","webpack:///./src/settings.js","webpack:///./src/lib/RouteHandleViewModel.js","webpack:///./src/components/About.vue?14b1","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/lib/loadGraph.js","webpack:///./src/SVGContainer.js","webpack:///src/components/About.vue","webpack:///./src/components/About.vue","webpack:///src/components/RoutePoint.vue","webpack:///./src/lib/Progress.js","webpack:///./src/components/RoutePoint.vue","webpack:///./src/components/RoutePoint.vue?d3fa","webpack:///./src/lib/request.js","webpack:///src/App.vue"],"names":["createTree","require","npath","loadGraph","Progress","RouteHandleViewModel","getSettings","queryState","bus","qs","graph","onChange","fromId","routeStart","pointId","toId","routeEnd","setCurrentSearchFromQueryState","updateRoute","loadedPoints","graphBBox","hetTestTree","pathFinder","pathFindersLookup","findNearestPoint","stats","visible","lastSearchTook","pathLength","graphNodeCount","graphLinksCount","settings","api","loadPositions","updateSearchAlgorithm","setCurrentPathFinder","set","pathFinderSettings","selected","updateSelectedGraph","graphSettings","clearRoute","getGraph","getGraphBBox","progress","pathInfo","svgPath","svgPaths","noPath","handleSceneClick","triggerRedraw","setRoutePointFormEvent","points","path","find","map","l","data","findPath","length","pt","index","p","x","y","join","pathObj","width","Math","round","random","color","i","toString","randomColor","opacity","push","clear","routePointViewModel","point","floor","Error","setFrom","triggerReDraw","graphName","get","reset","then","setApplicationModelVariables","catch","e","setError","loaded","initAsync","total","completed","done","treeReady","initHitTestTree","a-greedy-star","aGreedy","distance","heuristic","nba","astar-uni","aStar","dijkstra","numberWithCommas","getNodesCount","getLinksCount","fire","setTimeout","pathFinderName","from","getNode","to","replace","maxDistanceToExplore","arguments","undefined","pointsAround","idx","sort","a","b","pointDistance","src","dx","dy","sqrt","dataDistance","module","exports","eventify","BBox","_classCallCheck3","default","this","minX","Number","POSITIVE_INFINITY","minY","maxX","NEGATIVE_INFINITY","maxY","offset","xIn","yIn","rect","addPoint","left","top","right","bottom","otherBBox","esExports","render","_vm","_h","$createElement","_c","_self","attrs","id","ref","staticClass","_v","webGLEnabled","_e","_m","_l","d","stroke-width","stroke","stroke-opacity","fill-opacity","fill","scale","r","staticRenderFns","href","frameborder","allowfullscreen","__webpack_exports__","graphs","value","name","getAvailableGraphs","algorithms","getAvailablePathfinders","pointChangedCallback","beingDragged","pointChanged","graphNode","on","click","$event","preventDefault","close","target","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default","n","__WEBPACK_IMPORT_KEY__","key","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_917b3982_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","__vue_styles__","ssrContext","Component","normalizeComponent","Vue","config","productionTip","el","template","components","App","request","endpoint","createGraph","asyncFor","fileName","links","responseType","reportProgress","buffer","Int32Array","console","log","time","_promise2","resolve","addPointToGraph","pointsReady","timeEnd","step","initNodes","setLinks","nodeId","addNode","addLinkToGraph","linksReady","fromShifted","addLink","percent","SVGContainer","groupElement","drawCallback","_this","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","g","noop","transform","worldTransform","world","ours","pixelRatio","scene","getPixelRatio","setAttributeNS","Element","mounted","closeHandler","keyCode","document","addEventListener","beforeDestroy","removeEventListener","methods","$emit","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_About_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_About_vue___default","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_691801df_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_About_vue__","props","symbol","String","strokeWidth","type","fontSize","textY","computed","screenScale","errorMessage","details","errorDetails","message","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RoutePoint_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RoutePoint_vue___default","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_53891489_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_RoutePoint_vue__","font-size","text-anchor","_s","url","options","reject","req","XMLHttpRequest","lengthComputable","status","response","JSON","parse","open","send","wgl","RoutePoint","_RoutePoint2","About","_About2","isWebGLEnabled","$refs","canvas","_appModel2","createScene","off","ensurePreviousSceneDestroyed","detailsVisible","aboutVisible","graphNameTitle","helpVisible","pathText","getHelpText","dispose","unsubscribeMoveEvents","svgConntainer","_SVGContainer2","svg","querySelector","updateSVGElements","bind","appendChild","setClearColor","initialSceneSize","setViewBox","linksCount","lines","WireCollection","forEachLink","link","add","countTriggers","runningIntervalFunc","setInterval","onSceneClick","clearInterval","runningIntervalPart2","Array","isArray","foundPath","ea","updateGraph"],"mappings":"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","file":"static/js/app.774eed7dbb45d43483b7.js","sourcesContent":["/**\n * This is the main application model.\n */\nconst createTree = require('yaqt');\nconst npath = require('ngraph.path'); // the pathfinders\n\nconst loadGraph = require('./lib/loadGraph'); // loads graph asynchronously\nconst Progress = require('./lib/Progress'); // notifies UI about loading progress\n\n// This is a state for two dots A and B on the UI\nconst RouteHandleViewModel = require('./lib/RouteHandleViewModel');\n\n// We use a few options in the UI (available path finders, available graphs)\nconst getSettings = require('./settings.js')\n\n// Some state is shared in the query string (start/end of the route)\nconst queryState = require('query-state');\n\n// And this is how the state communicates asynchronously with App.vue\nconst bus = require('./bus');\n\n// Now that we are done with imports, lets initialize the state.\n\n// First of all, read what we currently have in the query string.\nconst qs = queryState({\n  graph: 'amsterdam-roads'\n});\n\nqs.onChange(updateStateFromQueryString);\n\nlet graph;      // current graph\nlet loadedPoints;\nlet graphBBox;  // current bounding box for a graph\nlet hetTestTree;       // this tree helps us find graph node under cursor\nlet pathFinder;        // currently selected pathfinder\nlet pathFindersLookup; // initialized after we load graph\n\nlet pendingQueryStringUpdate = 0; // Used to throttle query string updates.\n\nlet routeStart = new RouteHandleViewModel(updateRoute, findNearestPoint);\nlet routeEnd = new RouteHandleViewModel(updateRoute, findNearestPoint);\n\nlet stats = {\n  visible: false,\n  lastSearchTook: 0,\n  pathLength: 0,\n  graphNodeCount: '',\n  graphLinksCount: ''\n};\n\nlet settings = getSettings(qs);\n\nconst api = {\n  loadPositions,\n\n  updateSearchAlgorithm,\n  updateSelectedGraph,\n\n  getGraph,\n  getGraphBBox,\n\n  progress: new Progress(),\n  stats,\n\n  routeStart, \n  routeEnd,\n  pathInfo: {\n    svgPath: '',\n    svgPaths: [],\n    noPath: false\n  },\n\n  handleSceneClick,\n  clearRoute,\n\n  pathFinderSettings: settings.pathFinderSettings,\n  graphSettings: settings.graphSettings\n}\n\nmodule.exports = api;\n\n// The app model is ready at this point.\n\nfunction updateStateFromQueryString(queryState) {\n  let searchChanged = (queryState.fromId !== routeStart.pointId) || \n                      (queryState.toId !== routeEnd.pointId);\n\n  if (searchChanged) {\n    setCurrentSearchFromQueryState();\n    updateRoute();\n  }\n}\n\n\n/**\n * This method sets a new pathfinder, according to currently selected\n * drop down option from `pathFinderSettings`\n */\nfunction updateSearchAlgorithm() {\n  setCurrentPathFinder();\n  qs.set('finder', settings.pathFinderSettings.selected);\n  updateRoute();\n}\n\nfunction getGraphBBox() {\n  return graphBBox;\n}\n\nfunction randomColor() {\n   let color = '#';\n   for (let i = 0; i < 6; i++){\n      const random = Math.random();\n      const bit = (random * 16) | 0;\n      color += (bit).toString(16);\n   };\n   return color;\n};\n\nfunction updateRoute() {\n  if (!(routeStart.visible && routeEnd.visible)) {\n    api.pathInfo.svgPath = '';\n    return;\n  } \n\n  let fromId = routeStart.pointId;\n  let toId = routeEnd.pointId;\n\n  let path = findPath(fromId, toId);\n\n  api.pathInfo.noPath = path.length === 0;\n  api.pathInfo.svgPath = getSvgPath(path);\n  if (path.length > 0) {\n    let pathObj = {\n      'width': Math.round(Math.random() * 100),\n      'path': api.pathInfo.svgPath,\n      'color': randomColor(),\n      'opacity': Math.round(Math.random() * 5)/10 + 0.3,\n    }\n    api.pathInfo.svgPaths.push(pathObj);\n  }\n}\n\n\nfunction getPathLength(path) {\n  let totalLength = 0;\n  for (let i = 1; i < path.length; ++i) {\n    totalLength += dataDistance(path[i - 1], path[i]);\n  }\n  return numberWithCommas(Math.round(totalLength));\n}\n\nfunction clearRoute() {\n  routeStart.clear();\n  routeEnd.clear();\n  qs.set({\n    fromId: -1,\n    toId: -1\n  });\n}\n\nfunction handleSceneClick(triggerRedraw) {\n  if (!routeStart.visible) {\n    setRoutePointFormEvent(routeStart, triggerRedraw);\n  } else if (!routeEnd.visible) {\n    setRoutePointFormEvent(routeEnd, triggerRedraw);\n  } else {\n    clearRoute();\n  }\n}\n\nfunction setRoutePointFormEvent(routePointViewModel, triggerRedraw) {\n  if (!hetTestTree) return; // we are not initialized yet.\n  if (!loadedPoints) return;\n\n  let point = findNearestPoint(\n    loadedPoints[Math.floor(Math.random() * loadedPoints.length)],\n    loadedPoints[Math.floor(Math.random() * loadedPoints.length)])\n  if (!point) throw new Error('Point should be defined at this moment');\n\n  routePointViewModel.setFrom(point);\n\n  if (triggerRedraw) {\n    routePointViewModel.triggerReDraw();\n  }\n}\n\nfunction loadPositions() {\n  let graphName = qs.get('graph');\n  hetTestTree = null;\n  graph = null;\n  loadedPoints = null;\n  stats.visible = false;\n  api.progress.reset();\n\n  loadGraph(graphName, api.progress).then(setApplicationModelVariables)\n  .catch((e) => {\n    api.progress.setError('Could not load the graph', e);\n  });\n}\n\nfunction setApplicationModelVariables(loaded) {\n  graph = loaded.graph;\n  graphBBox = loaded.graphBBox;\n  pathFinder = null;\n\n  loadedPoints = loaded.points\n  initHitTestTree(loadedPoints);\n  initPathfinders();\n\n  stats.graphNodeCount = numberWithCommas(graph.getNodesCount());\n  stats.graphLinksCount = numberWithCommas(graph.getLinksCount());\n  bus.fire('graph-loaded')\n  setTimeout(() => {\n    // in case if we have path in the query string\n    updateRoute();\n  }, 0);\n}\n\nfunction initHitTestTree(loadedPoints) {\n  hetTestTree = createTree();\n  hetTestTree.initAsync(loadedPoints, {\n    progress(i, total) {\n      if (i % 500 !== 0) return;\n\n      // api.progress.message = 'Initializing tree for point & click'\n      api.progress.completed = Math.round(100 * i/total) + '%';\n    },\n    done() {\n      api.progress.treeReady = true;\n    }\n  });\n}\n\n\n\nfunction initPathfinders() {\n  pathFindersLookup = {\n    'a-greedy-star': npath.aGreedy(graph, {\n      distance: distance,\n      heuristic: distance\n    }),\n    'nba': npath.nba(graph, {\n      distance: distance,\n      heuristic: distance\n    }),\n    'astar-uni': npath.aStar(graph, {\n      distance: distance,\n      heuristic: distance\n    }),\n    'dijkstra': npath.aStar(graph, {\n      distance: distance\n    }),\n  }\n\n  setCurrentPathFinder()\n  setCurrentSearchFromQueryState();\n}\n\nfunction setCurrentPathFinder() {\n  let pathFinderName = settings.pathFinderSettings.selected;\n  pathFinder = pathFindersLookup[pathFinderName];\n  if (!pathFinder) {\n    throw new Error('Cannot find pathfinder ' + pathFinderName);\n  }\n}\n\nfunction setCurrentSearchFromQueryState() {\n  if (!graph) return;\n\n  let fromId = qs.get('fromId');\n  let toId = qs.get('toId');\n  let from = graph.getNode(fromId)\n  let to = graph.getNode(toId)\n  if (from) routeStart.setFrom(from)\n  if (to) routeEnd.setFrom(to)\n}\n\nfunction updateSelectedGraph() {\n  qs.set({\n    graph: settings.graphSettings.selected,\n    fromId: -1,\n    toId: -1\n  });\n\n  loadPositions();\n  clearRoute();\n}\n\nfunction numberWithCommas(x) {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction findPath(fromId, toId) {\n  return pathFinder.find(fromId, toId).map(l => l.data);\n}\n\nfunction getSvgPath(points) {\n  if (points.length < 1) return '';\n\n  return points.map((pt, index) => {\n    let prefix = (index === 0) ? 'M' : ''\n    return prefix + toPoint(pt);\n  }).join(' ');\n}\n\nfunction toPoint(p) { return p.x + ',' + p.y }\n\nfunction getGraph() {\n  return graph;\n}\n\nfunction findNearestPoint(x, y, maxDistanceToExplore = 2000) {\n  if (!hetTestTree) return;\n\n  let points = hetTestTree.pointsAround(x, y, maxDistanceToExplore).map(idx => graph.getNode(idx/2))\n  // let points = hetTestTree.pointsAround(x, y, maxDistanceToExplore).map(idx => graph.getNode(Math.round(Math.random() * (graph.getNodesCount()-1) + 1)))\n  .sort((a, b) => {\n    let da = pointDistance(a.data, x, y);\n    let db = pointDistance(b.data, x, y)\n    return da - db;\n  });\n\n  if (points.length > 0) {\n    return points[0];\n  } else {\n    // keep trying.\n    return findNearestPoint(x, y, maxDistanceToExplore * 2);\n  }\n}\n\nfunction pointDistance(src, x, y) {\n  let dx = src.x - x;\n  let dy = src.y - y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction distance(a, b) {\n  return dataDistance(a.data, b.data);\n}\n\nfunction dataDistance(a, b) {\n  let dx = a.x - b.x;\n  let dy = a.y - b.y;\n\n  return Math.sqrt(dx * dx + dy * dy)\n}\n\n\n// WEBPACK FOOTER //\n// ./src/appModel.js","var eventify = require('ngraph.events');\nvar bus = eventify({});\n\nmodule.exports = bus;\n\n\n// WEBPACK FOOTER //\n// ./src/bus.js","class BBox {\n  constructor() {\n    this.minX = Number.POSITIVE_INFINITY;\n    this.minY = Number.POSITIVE_INFINITY;\n    this.maxX = Number.NEGATIVE_INFINITY;\n    this.maxY = Number.NEGATIVE_INFINITY;\n  }\n\n  growBy(offset) {\n    this.minX -= offset;\n    this.minY -= offset;\n    this.maxX += offset;\n    this.maxY += offset;\n  }\n\n  get left() {\n    return this.minX;\n  }\n\n  get top() {\n    return this.minY;\n  }\n\n  get right() {\n    return this.maxX;\n  }\n\n  get bottom() {\n    return this.maxY;\n  }\n\n  get width() {\n    return this.maxX - this.minX;\n  }\n\n  get height() {\n    return this.maxY - this.minY;\n  }\n\n  get cx() {\n    return (this.minX + this.maxX)/2;\n  }\n\n  get cy() {\n    return (this.minY + this.maxY)/2;\n  }\n\n  addPoint(xIn, yIn) {\n    if (xIn === undefined) throw new Error('Point is not defined');\n    let x = xIn;\n    let y = yIn;\n    if (y === undefined) {\n      // xIn is a point object\n      x = xIn.x;\n      y = xIn.y;\n    }\n\n    if (x < this.minX) this.minX = x;\n    if (x > this.maxX) this.maxX = x;\n    if (y < this.minY) this.minY = y;\n    if (y > this.maxY) this.maxY = y;\n  }\n\n  addRect(rect) {\n    if (!rect) throw new Error('rect is not defined');\n    this.addPoint(rect.left, rect.top);\n    this.addPoint(rect.right, rect.top);\n    this.addPoint(rect.left, rect.bottom);\n    this.addPoint(rect.right, rect.bottom);\n  }\n\n  merge(otherBBox) {\n    if (otherBBox.minX < this.minX) this.minX = otherBBox.minX;\n    if (otherBBox.minY < this.minY) this.minY = otherBBox.minY;\n    if (otherBBox.maxX > this.maxX) this.maxX = otherBBox.maxX;\n    if (otherBBox.maxY > this.maxY) this.maxY = otherBBox.maxY;\n  }\n}\n\nmodule.exports = BBox;\n\n\n\n// WEBPACK FOOTER //\n// ./src/BBox.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('canvas',{ref:\"canvas\",staticClass:\"absolute\"}),_vm._v(\" \"),(!_vm.webGLEnabled)?_c('div',[_vm._m(0)]):_vm._e(),_vm._v(\" \"),(_vm.webGLEnabled)?_c('div',[_c('svg',{ref:\"svg\",staticClass:\"svg-overlay absolute\"},[_c('g',{staticClass:\"scene\"},[_vm._l((_vm.pathInfo.svgPaths),function(path){return _c('path',{attrs:{\"d\":path.path,\"stroke-width\":path.width,\"stroke\":path.color,\"stroke-opacity\":\"0.1\",\"fill-opacity\":\"0\",\"fill\":\"transparent\"}})}),_vm._v(\" \"),_c('path',{ref:\"foundPath\",attrs:{\"d\":_vm.pathInfo.svgPath,\"stroke-width\":\"1x\",\"stroke\":\"#6699cc\",\"fill-opacity\":\"0.05\",\"fill\":\"transparent\"}}),_vm._v(\" \"),(_vm.routeStart.visible)?_c('route-point',{attrs:{\"point\":_vm.routeStart,\"scale\":_vm.scale,\"r\":_vm.routeStart.r}}):_vm._e(),_vm._v(\" \"),(_vm.routeEnd.visible)?_c('route-point',{attrs:{\"point\":_vm.routeEnd,\"scale\":_vm.scale,\"r\":_vm.routeEnd.r}}):_vm._e()],2)])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"absolute no-webgl\"},[_c('h4',[_vm._v(\"WebGL is not enabled :(\")]),_vm._v(\" \"),_c('div',[_vm._v(\"While \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"ngraph.path\")]),_vm._v(\" does not require any webgl, this demo needs it.\")]),_vm._v(\" \"),_c('iframe',{staticClass:\"video-demo\",attrs:{\"src\":\"https://www.youtube.com/embed/hGeZuIEV6KU\",\"frameborder\":\"0\",\"allowfullscreen\":\"\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-917b3982\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = DzQ/\n// module chunks = 1","module.exports = getSettings\n\nfunction getSettings(qs) {\n  const graphSettings = getAvailableGraphs(qs); \n  const pathFinderSettings = getAvailablePathfinders(qs); \n\n  return {\n    graphSettings,\n    pathFinderSettings\n  };\n}\n\n\nfunction getAvailableGraphs(qs) {\n  let graphs = [{\n    value: 'amsterdam-roads',\n    name: 'Amsterdam (76K edges, 1.1 MB)'\n  }, {\n    value: 'seattle-roads',\n    name: 'Seattle (173K edges, 2.4 MB)'\n  }, {\n    value: 'rome-roads',\n    name: 'Rome (258K edges, 3.8 MB)'\n  }, {\n    value: 'delhi-roads',\n    name: 'Delhi (280K edges, 3.9 MB)'\n  }, {\n    value: 'moscow-roads',\n    name: 'Moscow (451K edges, 6.5 MB)'\n  }, {\n    value: 'USA-road-d.NY',\n    name: 'New York (730K edges, 7.6 MB)'\n  },\n  // Commenting this out, as on mobile devices it may crash the browser.\n  //  {\n  //   value: 'tokyo-roads',\n  //   name: 'Tokyo (879K edges, 12.3 MB)'\n  // }\n];\n\n  return {\n    selected: qs.get('graph'),\n    graphs\n  };\n}\n\nfunction getAvailablePathfinders(qs) {\n  return {\n    selected: qs.get('finder') || 'nba',\n    algorithms: [{\n      value: 'a-greedy-star',\n      name: 'Greedy A* (suboptimal)'\n    }, {\n      value: 'nba',\n      name: 'NBA*'\n    }, {\n      value: 'astar-uni',\n      name: 'Unidirectional A*'\n    }, {\n      value: 'dijkstra',\n      name: 'Dijkstra'\n    }]\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/settings.js","class RouteHandleViewModel {\n  constructor(pointChangedCallback, findNearestPoint) {\n    this.visible = false;\n    this.beingDragged = false;\n\n    this.pointId = -1;\n    this.x = 0;\n    this.y = 0;\n    this.r = 18;\n\n    this.pointChanged = pointChangedCallback;\n    this.findNearestPoint = findNearestPoint;\n  }\n\n  setFrom(graphNode) {\n    this.visible = true;\n    this.pointId = graphNode.id;\n    this.x = graphNode.data.x;\n    this.y = graphNode.data.y;\n    this.pointChanged(this);\n  }\n\n  triggerReDraw() {\n    // this.pointChanged(this);\n  }\n\n  clear() {\n    this.visible = false;\n    this.pointId = -1;\n    this.x = 0;\n    this.y = 0;\n    this.pointChanged(this);\n  }\n}\n\nmodule.exports = RouteHandleViewModel;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/RouteHandleViewModel.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('div',{staticClass:\"background absolute\",on:{\"click\":function($event){$event.preventDefault();return _vm.close($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('h3',[_vm._v(\"ngraph.path \"),_c('a',{staticClass:\"close bold\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.close($event)}}},[_vm._v(\"close\")])]),_vm._v(\" \"),_vm._m(0),_c('p',[_vm._v(\"\\n      Don't use this website for actual navigation :).\\n    \")]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_vm._m(3),_vm._v(\" \"),_vm._m(4),_vm._v(\" \"),_c('a',{staticClass:\"large-close bold\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.close($event)}}},[_vm._v(\"\\n      close\\n    \")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n      This website is a demo for the \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"ngraph.path\")]),_vm._v(\"\\n      library. The library implements pathfinding algorithms for generic graphs (not limited to grids).\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"My goal was to build a very fast library, that could help many developers\\n      find their paths. In my tests, the library showed great performance with median\\n      path finding speed \"),_c('span',{staticClass:\"bold\"},[_vm._v(\"34ms\")]),_vm._v(\" on \"),_c('span',{staticClass:\"bold\"},[_vm._v(\"733,844\")]),_vm._v(\" edges graph.\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"I built the roads graph for this demo using amazing \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"http://www.openstreetmap.org/\",\"target\":\"_blank\"}},[_vm._v(\"OpenStreetMap\")]),_vm._v(\".\\n    \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://github.com/anvaka/ngraph.path\"}},[_vm._v(\"Learn more \")]),_vm._v(\" about this project on GitHub\\n      \")]),_c('li',[_vm._v(\"\\n      Stay tuned for updates on \"),_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"Twitter.\")])]),_c('li',[_c('a',{staticClass:\"highlighted\",attrs:{\"href\":\"https://www.youtube.com/watch?v=hGeZuIEV6KU\"}},[_vm._v(\" Watch a video\")]),_vm._v(\" demo.\\n      \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"With passion,\"),_c('br'),_vm._v(\" Anvaka\")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-691801df\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/About.vue\n// module id = LwKS\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-917b3982\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-917b3982\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","const request = require('./request');\nconst endpoint = 'static/'\nconst createGraph = require('ngraph.graph');\nconst BBox = require('../BBox');\n\nconst asyncFor = require('rafor');\n\n\nmodule.exports = loadPositions;\n\nfunction loadPositions(fileName, progress) {\n  let graph = createGraph();\n  let points;\n  let links;\n  let graphBBox = new BBox();\n\n  // I used this smaller graph for testing\n  // return new Promise((resolve) => {\n  //   graph.addNode(1, { x: -100, y: 0 });\n  //   graph.addNode(2, { x: 100, y: 0 });\n  //   graph.addLink(1, 2);\n  //   points = [-100, 0, 100, 0];\n  //   links = [1, 2]\n  //   graphBBox.addPoint(-100, 0)\n  //   graphBBox.addPoint(100, 0)\n\n  //   progress.pointsReady = true;\n  //   progress.linksReady = true;\n  //   resolve({graph, points, links, graphBBox});\n  // })\n  return request(endpoint + `/${fileName}.co.bin`, {\n    responseType: 'arraybuffer',\n    progress: reportProgress('Loading intersection coordinates')\n  })\n    .then(setPositions)\n    .then(loadLinks)\n    .then(() => {\n      return {\n        graph, points, links, graphBBox\n      }\n    });\n\n  function setPositions(buffer) {\n    points = new Int32Array(buffer);\n    console.log('Downloaded nodes: ' + points.length/2);\n\n    return initNodes(points);\n  }\n\n  function initNodes(points) {\n    console.time('add nodes to graph');\n    // progress.message = 'Adding nodes to graph'\n\n    return new Promise((resolve) => {\n      asyncFor(points, addPointToGraph, () => {\n        progress.pointsReady = true;\n        console.timeEnd('add nodes to graph');\n        resolve();\n      }, { step: 2 });\n\n      progress.pointsReady = true;\n    });\n  }\n\n  function addPointToGraph(x, i, points) {\n    let nodeId = Math.floor(i / 2);\n    let y = points[i + 1];\n    graph.addNode(nodeId, { x, y })\n    graphBBox.addPoint(x, y);\n\n    if (i % 500 === 0) {\n      progress.completed = Math.round(100 * i/points.length) + '%';\n    }\n  }\n\n\n  function loadLinks() {\n    return request(endpoint + `/${fileName}.gr.bin`, {\n      responseType: 'arraybuffer',\n      progress: reportProgress('Loading roads graph')\n    }).then(setLinks)\n  }\n\n  function setLinks(buffer) {\n    links = new Int32Array(buffer);\n\n    // progress.message = 'Adding edges to graph'\n    console.time('add edges to graph');\n    return new Promise((resolve) => {\n      asyncFor(links, addLinkToGraph, () => {\n        console.timeEnd('add edges to graph');\n        progress.linksReady = true;\n        console.log(graph.getLinksCount() + ' edges; ' + graph.getNodesCount() + ' nodes.')\n        resolve();\n      }, { step: 2 });\n    });\n  }\n\n  function addLinkToGraph(fromShifted, i, links) {\n    let fromId = fromShifted - 1;\n    let toId = links[i + 1] - 1;\n\n    graph.addLink(fromId, toId);\n\n    if (i % 500 === 0) {\n      progress.completed = Math.round(100 * i/links.length) + '%';\n    }\n  }\n\n\n  function reportProgress(name) {\n    return function(e) {\n      // progress.message = name;\n      progress.completed = Math.round(e.percent * 100) + '%';\n    };\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/loadGraph.js","let wgl = require('w-gl');\n\n/**\n * Applies current transformation matrix to a given SVG group\n * element.\n */\nclass SVGContainer extends wgl.Element {\n\n  /**\n   * @param {SVGGElement} groupElement where transformation should be applied\n   * @param {Function} drawCallback a function that is called after each\n   * `draw()`\n   */\n  constructor(groupElement, drawCallback) {\n    super();\n    this.g = groupElement;\n    this.dx = 0;\n    this.dy = 0;\n    this.scale = 0;\n    this.drawCallback = drawCallback || noop;\n  }\n\n  draw() {\n    let transform = this.worldTransform;\n    if(transformsAreSame(this.worldTransform, this)) {\n      // Avoid DOM updates if possible.\n      return;\n    }\n    let pixelRatio = this.scene.getPixelRatio();\n\n    let scale = transform.scale/pixelRatio;\n    let dx = transform.dx/pixelRatio;\n    let dy = transform.dy/pixelRatio;\n\n    this.g.setAttributeNS(null, 'transform', `matrix(${scale}, 0, 0, ${scale}, ${dx}, ${dy})`);\n    this.scale = transform.scale;\n    this.dx = transform.dx;\n    this.dy = transform.dy;\n\n    this.drawCallback(this);\n  }\n}\n\nfunction transformsAreSame(world, ours) {\n  return world.scale == ours.scale &&\n         world.dx === ours.dx &&\n         world.dy === ours.dy;\n}\n\nmodule.exports = SVGContainer;\n\nfunction noop() {}\n\n\n// WEBPACK FOOTER //\n// ./src/SVGContainer.js","<template>\n  <div class='about'>\n    <div class='background absolute' @click.prevent='close'></div>\n    <div class='content'>\n      <h3>ngraph.path <a class='close bold' href='#' @click.prevent='close'>close</a></h3>\n      <p>\n        This website is a demo for the <a href='https://github.com/anvaka/ngraph.path' class='highlighted'>ngraph.path</a>\n        library. The library implements pathfinding algorithms for generic graphs (not limited to grids).\n      </p><p>\n        Don't use this website for actual navigation :).\n      </p>\n\n      <p>My goal was to build a very fast library, that could help many developers\n        find their paths. In my tests, the library showed great performance with median\n        path finding speed <span class='bold'>34ms</span> on <span class='bold'>733,844</span> edges graph.\n      </p>\n      <p>I built the roads graph for this demo using amazing <a href='http://www.openstreetmap.org/' target='_blank' class='highlighted'>OpenStreetMap</a>.\n      </p>\n      <ul>\n        <li>\n          <a href='https://github.com/anvaka/ngraph.path' class='highlighted'>Learn more </a> about this project on GitHub\n        </li><li>\n        Stay tuned for updates on <a href='https://twitter.com/anvaka' class='highlighted'>Twitter.</a>\n        </li><li>\n        <a href='https://www.youtube.com/watch?v=hGeZuIEV6KU' class='highlighted'> Watch a video</a> demo.\n        </li>\n      </ul>\n      <p>With passion,<br/> Anvaka</p>\n      <a href='#' @click.prevent='close' class='large-close bold'>\n        close\n      </a>\n    </div>\n  </div>\n</template>\n<script>\n\nexport default {\n  mounted() {\n    this.closeHandler = (e) => {\n      if (e.keyCode === 27) {\n        e.preventDefault();\n        this.close();\n      }\n    }\n    document.addEventListener('keyup', this.closeHandler);\n  },\n  beforeDestroy() {\n    document.removeEventListener('keyup', this.closeHandler);\n  },\n  methods: {\n    close() {\n      this.$emit('close');\n    }\n  }\n}\n</script>\n\n<style lang='stylus'>\n.about {\n  position: absolute;\n  overflow-y: auto;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n\n  .close {\n    position: absolute;\n    right: 15px;\n    font-size: 12px;\n  }\n\n  .large-close {\n    width: 100%;\n    height: 32px;\n    display: block;\n    text-align: center;\n  }\n\n  .content {\n    color: hsla(215, 37%, 55%, 1);\n    position: absolute;\n    background-color: hsla(215, 74%, 18%, 1.0);\n    width: 400px;\n    padding: 14px;\n    border: 1px solid hsla(215, 37%, 55%, 1);\n    h3 {\n      margin: 0;\n      font-weight: normal;\n    }\n  }\n}\n\n.background {\n  position: absolute;\n  background-color: hsla(215, 74%, 18%, 0.8);\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n@media (max-width: 800px) {\n  .about {\n    justify-content: initial;\n  }\n  .about .content {\n    width: 100%;\n    border: none;\n  }\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/About.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-691801df\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./About.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./About.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./About.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-691801df\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./About.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/About.vue\n// module id = c27y\n// module chunks = 1","<template>\n  <g :transform='screenScale'>\n    <circle :r='r' fill='#6699CC' fill-opacity=\"0.3\" stroke='white' :stroke-width='strokeWidth' ></circle>\n    <text :font-size='fontSize' fill='white' text-anchor='middle' :y='textY' class='no-pointer'>{{symbol}}</text>\n  </g>\n</template>\n<script>\nexport default {\n  name: 'RoutePoint',\n  props: {\n    point: Object,\n    scale: Number,\n    symbol: String,\n    r: Number,\n    strokeWidth: {\n      type: Number,\n      default: 2\n    },\n    fontSize: {\n      type: Number,\n      default: 28\n    },\n    textY: {\n      type: Number,\n      default: 10\n    }\n  },\n  computed: {\n    screenScale() {\n      let scale = 1/this.scale;\n      let dx = this.point.x;\n      let dy = this.point.y;\n      return `matrix(${scale}, 0, 0, ${scale}, ${dx}, ${dy})`;\n    },\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/RoutePoint.vue","class Progress {\n  constructor() {\n    this.reset();\n  }\n\n  get visible() {\n    return !(this.pointsReady && this.linksReady && this.treeReady);\n  }\n\n  setError(errorMessage, details) {\n    this.errorMessage = errorMessage;\n    this.errorDetails = details;\n  }\n\n  reset() {\n    this.errorMessage = null;\n    this.errorDetails = null;\n    this.message = '';\n    this.completed = '';\n    this.pointsReady = false;\n    this.linksReady = false;\n    this.treeReady = false;\n  }\n}\n\nmodule.exports = Progress;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Progress.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoutePoint.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoutePoint.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-53891489\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./RoutePoint.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/RoutePoint.vue\n// module id = qEFR\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{attrs:{\"transform\":_vm.screenScale}},[_c('circle',{attrs:{\"r\":_vm.r,\"fill\":\"#6699CC\",\"fill-opacity\":\"0.3\",\"stroke\":\"white\",\"stroke-width\":_vm.strokeWidth}}),_vm._v(\" \"),_c('text',{staticClass:\"no-pointer\",attrs:{\"font-size\":_vm.fontSize,\"fill\":\"white\",\"text-anchor\":\"middle\",\"y\":_vm.textY}},[_vm._v(_vm._s(_vm.symbol))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-53891489\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/RoutePoint.vue\n// module id = us5R\n// module chunks = 1","module.exports = request;\n\nfunction request(url, options) {\n  if (!options) options = {};\n\n  return new Promise(download);\n\n  function download(resolve, reject) {\n    var req = new XMLHttpRequest();\n\n    if (typeof options.progress === 'function') {\n      req.addEventListener(\"progress\", updateProgress, false);\n    }\n\n    req.addEventListener(\"load\", transferComplete, false);\n    req.addEventListener(\"error\", transferFailed, false);\n    req.addEventListener(\"abort\", transferCanceled, false);\n\n    req.open('GET', url);\n    if (options.responseType) {\n      req.responseType = options.responseType;\n    }\n    req.send(null);\n\n    function updateProgress(e) {\n      if (e.lengthComputable) {\n        options.progress({\n          loaded: e.loaded,\n          total: e.total,\n          percent: e.loaded / e.total\n        });\n      }\n    }\n\n    function transferComplete() {\n      if (req.status !== 200) {\n        reject(`Unexpected status code ${req.status} when calling ${url}`);\n        return;\n      }\n      var response = req.response;\n\n      if (options.responseType === 'json' && typeof response === 'string') {\n        // IE\n        response = JSON.parse(response);\n      }\n\n      resolve(response);\n    }\n\n    function transferFailed() {\n      reject(`Failed to download ${url}`);\n    }\n\n    function transferCanceled() {\n      reject(`Cancelled download of ${url}`);\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/request.js","<template>\n  <div id=\"app\">\n    <canvas ref='canvas' class='absolute'></canvas>\n    <div v-if='!webGLEnabled'>\n      <div class='absolute no-webgl'>\n        <h4>WebGL is not enabled :(</h4>\n        <div>While <a href='https://github.com/anvaka/ngraph.path' class='highlighted'>ngraph.path</a> does not require any webgl, this demo needs it.</div>\n        <iframe src=\"https://www.youtube.com/embed/hGeZuIEV6KU\" frameborder=\"0\" allowfullscreen class='video-demo'></iframe>\n      </div>\n    </div>\n    <div v-if='webGLEnabled'>\n      <svg ref='svg' class='svg-overlay absolute'>\n        <g class='scene'>\n\n          <path v-for='path in pathInfo.svgPaths' :d='path.path' :stroke-width='path.width' :stroke='path.color' stroke-opacity='0.1' fill-opacity='0' fill='transparent' ></path>\n\n          <path ref='foundPath' :d='pathInfo.svgPath' stroke-width='1x' stroke='#6699cc' fill-opacity='0.05' fill='transparent' ></path>\n\n          <route-point :point='routeStart' :scale='scale' :r='routeStart.r' v-if='routeStart.visible'></route-point>\n          <route-point :point='routeEnd' :scale='scale' :r='routeEnd.r' v-if='routeEnd.visible'></route-point>\n        </g>\n      </svg>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from './appModel';\nimport SVGContainer from './SVGContainer';\nimport RoutePoint from './components/RoutePoint';\nimport About from './components/About';\n\nconst bus = require('./bus');\nconst wgl = require('w-gl');\n\nexport default {\n  name: 'app',\n  components: {\n    RoutePoint,\n    About\n  },\n  mounted() {\n    this.webGLEnabled = wgl.isWebGLEnabled(this.$refs.canvas);\n    if (!this.webGLEnabled) {\n      // TODO: Maybe render something smaller with SVG?\n      return;\n    }\n\n    api.loadPositions()\n    bus.on('graph-loaded', this.createScene, this);\n  },\n  beforeDestroy() {\n    bus.off('graph-loaded', this.createScene);\n    this.ensurePreviousSceneDestroyed();\n  },\n  data() {\n    return {\n      webGLEnabled: true,\n      loaded: false,\n      detailsVisible: false,\n      progress: api.progress,\n      routeStart: api.routeStart,\n      routeEnd: api.routeEnd,\n      stats: api.stats,\n      scale: 1,\n      pathInfo: api.pathInfo,\n      pathFinder: api.pathFinderSettings,\n      graphSettings: api.graphSettings,\n      aboutVisible: false,\n    }\n  },\n  computed: {\n    graphNameTitle() {\n      let stats = this.stats;\n      if (!stats) return '';\n\n      return stats.graphNodeCount + ' nodes; ' + stats.graphLinksCount + ' edges';\n    },\n    helpVisible() {\n      return !(this.routeStart.visible && this.routeEnd.visible);\n    },\n    pathText() {\n      if (this.pathInfo.noPath) {\n        return 'No path (' + this.stats.lastSearchTook + ')';\n      }\n      return 'Found in: ' + this.stats.lastSearchTook;\n    }\n  },\n\n  methods: {\n    clearRoute() {\n      api.clearRoute();\n    },\n    getHelpText() {\n      if (!this.routeStart.visible) {\n        return 'Click anywhere to select starting point';\n      } else if (!this.routeEnd.visible) {\n        return 'Click anywhere to select destination';\n      }\n    },\n\n    ensurePreviousSceneDestroyed() {\n      if (this.scene) {\n        this.scene.dispose();\n        this.scene = null;\n      }\n      if (this.unsubscribeMoveEvents) {\n        this.unsubscribeMoveEvents();\n        this.unsubscribeMoveEvents = null;\n      }\n    },\n\n    createScene() {\n      this.ensurePreviousSceneDestroyed();\n\n      let canvas = this.$refs.canvas;\n      this.loaded = true;\n\n      this.scene = wgl.scene(canvas);\n      // this.scene.setPixelRatio(2);\n      let scene = this.scene;\n      let svgConntainer = new SVGContainer(this.$refs.svg.querySelector('.scene'), this.updateSVGElements.bind(this));\n      this.scene.appendChild(svgConntainer)\n      scene.setClearColor(1, 1, 1, 1)\n\n      let bbox = api.getGraphBBox();\n      let initialSceneSize = bbox.width/8;\n      scene.setViewBox({\n        left:  -initialSceneSize,\n        top:   -initialSceneSize,\n        right:  initialSceneSize,\n        bottom: initialSceneSize,\n      })\n\n      let graph = api.getGraph();\n\n      let linksCount = graph.getLinksCount();\n      let lines = new wgl.WireCollection(linksCount);\n      lines.color = {r: 0, g: 0, b: 0, a: 0.1}\n      graph.forEachLink(function (link) {\n        let from = graph.getNode(link.fromId).data;\n        let to = graph.getNode(link.toId).data\n\n        lines.add({ from, to });\n      });\n\n      scene.appendChild(lines);\n      let countTriggers = 0;\n      let runningIntervalFunc = setInterval(() => {\n         this.onSceneClick(countTriggers % 100 == 0);\n         countTriggers += 1;\n         if (countTriggers > 500) {\n           clearInterval(runningIntervalFunc);\n           console.log(\"drawing pt 1 done\");\n           let runningIntervalPart2 = setInterval(() => {\n             this.onSceneClick(true);\n             countTriggers += 1;\n             if (countTriggers > 1000) {\n               clearInterval(runningIntervalPart2);\n               console.log(\"done drawing\");\n             }\n           }, 150);\n         }\n      }, 60)\n    },\n\n    updateSVGElements(svgConntainer) {\n      let strokeWidth = 6/svgConntainer.scale;\n      if (Array.isArray(this.$refs.foundPath)) {\n        this.$refs.foundPath.map(ea => ea.setAttributeNS(null, 'stroke-width', strokeWidth + 'px'));\n      } else {\n        this.$refs.foundPath.setAttributeNS(null, 'stroke-width', strokeWidth + 'px');\n      }\n      this.scale = svgConntainer.scale / this.scene.getPixelRatio() * 5;\n    },\n\n    updateGraph() {\n      this.ensurePreviousSceneDestroyed();\n      setTimeout(() => {\n        api.updateSelectedGraph();\n      }, 2);\n    },\n\n    updateSearchAlgorithm() {\n      api.updateSearchAlgorithm();\n    },\n\n    onSceneClick(triggerRedraw) {\n      api.handleSceneClick(triggerRedraw);\n    },\n  }\n}\n</script>\n\n<style lang='stylus'>\n.absolute {\n  position: absolute;\n}\n\ncanvas {\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n\n\n.center {\n  display: flex;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n}\n\n.direction-switch {\n  display: flex;\n  height: 100%;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n}\n\na {\n  text-decoration: none;\n}\n\na.direction-switch {\n  color: hsla(215, 37%, 55%, 1);\n}\na.highlighted {\n  color: white;\n  border-bottom: 1px dashed white;\n}\n\n.bold {\n  color: hsla(215, 37%, 85%, 1);\n}\n\n.row {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: baseline;\n  height: 32px;\n}\n.col {\n  flex: 1\n}\n\n.details {\n  padding: 8px 14px;\n}\n\nselect {\n  background: transparent;\n  border: none;\n  color: hsla(215, 37%, 85%, 1);\n  appearance: none;\n  font-size: 14px;\n  border-bottom: 1px dashed;\n  border-radius: 0;\n  padding-bottom: 4px;\n}\n\noption {\n  color: black;\n}\n\nsvg text {\n  pointer-events: none;\n  user-select: none;\n}\nselect:focus {\n  outline: none;\n}\n\n.graph-name {\n  position: absolute;\n  bottom: 42px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: hsla(215, 74%, 18%, 0.8);\n  padding: 0 10px;\n  select {\n    font-size: 24px;\n    cursor: pointer;\n  }\n}\n\n@media (max-width: 800px) {\n  .progress {\n    font-size: 18px;\n  }\n\n  .details {\n    padding: 5px;\n  }\n  .controls {\n    width: 100%;\n    margin: 0;\n  }\n  .stats {\n    margin: 0;\n    bottom: 0px;\n    top: auto;\n  }\n\n  a.about-link {\n    bottom: 0;\n    padding-bottom: 4px;\n  }\n\n  .no-webgl {\n    .video-demo {\n      width: 560px;\n      height: 315px;\n    }\n  }\n\n  .direction-switch {\n    font-size: 14px;\n  }\n}\n\n@media (max-width: 600px) {\n  .no-webgl {\n    padding: 0;\n    div {\n      padding: 7px;\n    }\n    .video-demo {\n      width: 100%;\n      height: 300px;\n    }\n  }\n  .graph-name {\n    bottom: 48px;\n    select {\n      font-size: 16px;\n    }\n  }\n}\n\nsvg.svg-overlay {\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  background: transparent;\n}\n\n.route-info-container {\n  display: flex;\n}\n\nsvg.route-info {\n  flex: 1;\n  height: 10px;\n  cursor: pointer;\n  width: 100%;\n  margin-left: 7px;\n}\n\na.reset {\n  color: hsla(215, 37%, 85%, 1);\n  font-size: small;\n  padding: 0 10px;\n  display: block;\n  height: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n\n.label {\n  width: 100px;\n  flex-shrink: 0;\n  padding-right: 7px;\n}\n.no-pointer {\n  pointer-events: none;\n}\n\n.error {\n  color:deeppink;\n}\n.error-details {\n  font-family: monospace;\n  text-align: left;\n}\n\na::selection,\nh3::selection,\nh4::selection,\ndiv::selection,\np::selection {\n  background: #d03094;\n  color: white;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue"],"sourceRoot":""}